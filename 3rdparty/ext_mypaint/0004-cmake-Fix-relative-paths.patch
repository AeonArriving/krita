From 606e2353a9b60d6443733ed4a12453698b8d2ac8 Mon Sep 17 00:00:00 2001
From: "L. E. Segovia" <amy@amyspark.me>
Date: Tue, 17 Nov 2020 23:44:44 +0000
Subject: [PATCH 4/4] cmake: Fix relative paths

---
 CMakeLists.txt | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 882e20e..fa80b3b 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -66,11 +66,8 @@ target_link_libraries(mypaint ${JSONC_LIBRARIES})
 set_property(TARGET mypaint PROPERTY C_STANDARD 11)
 install(TARGETS mypaint
     EXPORT libmypaintTargets
-    RUNTIME DESTINATION bin
-    LIBRARY DESTINATION lib
-    ARCHIVE DESTINATION lib
 ) 
-install(FILES ${mypaint_HEADERS} DESTINATION include)
+install(FILES ${mypaint_HEADERS} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/libmypaint)
 
 if(JsonC_FOUND)
     set(PKG_CONFIG_REQUIRES "json-c")
@@ -79,16 +76,16 @@ else()
 endif()
 configure_file("libmypaint.pc.in" "libmypaint.pc" @ONLY)
 install(FILES "${CMAKE_CURRENT_BINARY_DIR}/libmypaint.pc"
-    DESTINATION lib/pkgconfig)
+    DESTINATION ${CMAKE_INSTALL_LIBDIR}/pkgconfig)
 
 configure_package_config_file(
     "libmypaint-Config.cmake.in" "libmypaintConfig.cmake"
-    INSTALL_DESTINATION lib/cmake/libmypaint
+    INSTALL_DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/libmypaint
     PATH_VARS CMAKE_INSTALL_PREFIX CMAKE_INSTALL_LIBDIR CMAKE_INSTALL_INCLUDEDIR)
 write_basic_package_version_file(libmypaintConfigVersion.cmake
     COMPATIBILITY SameMinorVersion)
 install(FILES "${CMAKE_CURRENT_BINARY_DIR}/libmypaintConfigVersion.cmake"
     "${CMAKE_CURRENT_BINARY_DIR}/libmypaintConfig.cmake"
-    DESTINATION lib/cmake/libmypaint)
+    DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/libmypaint)
 
-install(EXPORT libmypaintTargets DESTINATION lib/cmake/libmypaint)
+install(EXPORT libmypaintTargets DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/libmypaint)
-- 
2.29.2.windows.1

